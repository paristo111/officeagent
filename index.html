<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>빈 방 있습니다</title>
  <style>
    /* ------------------------------
       기본 레이아웃 설정
       ------------------------------ */
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden; /* 스크롤바가 생기지 않도록 */
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      background: #ffffff;
    }

    /* 전체 장면용 컨테이너 */
    #scene {
      position: relative;
      width: 100vw;
      height: 100vh;
    }

    /* ------------------------------
       땅 (바닥에서 화면 높이의 5% 위)
       ------------------------------ */
    .ground {
      position: absolute;
      left: 0;
      right: 0;
      bottom: 5vh;               /* 조건 5: 세로폭 5% 위 */
      border-top: 1px solid #000;/* 조건 2, 4: 땅은 가로선 */
      box-sizing: border-box;
    }

    /* ------------------------------
       건물 (항상 땅 위, 가운데 배치)
       ------------------------------ */
    /* 바닥 */
    .floor-l {
      position: absolute;
      padding: 0;
      width: 12vh;
      height: 3vh;
      border: 1px solid #000;    /* 모든 선 1px */
      border-bottom: none;       /* 아래쪽은 본체와 맞닿으므로 제거 */
      background: #fff;
      transform-origin: bottom left;
      transform: skewX(36deg);  /* 기울기 조절 */
      z-index: 30;
    }

    .floor-r {
      position: absolute;
      padding: 0;
      width: 12vh;
      height: 3vh;
      border: 1px solid #000;    /* 모든 선 1px */
      border-bottom: none;       /* 아래쪽은 본체와 맞닿으므로 제거 */
      background: #fff;
      transform-origin: bottom left;
      transform: skewX(36deg);  /* 기울기 조절 */
      z-index: 10;
    }

    .wall-l {
      position: absolute;
      width: 12vh;
      height: 73.2vh;
      left: 50%;
      bottom: 0;              /* 땅의 y 위치와 동일 */ 
      display: flex;
      justify-content: flex-end;
      transform: translateX(-100%);
      background: #fff0;
      z-index: 20;
    }

    .wall-r {
      position: absolute;
      width: 12vh;
      height: 73.2vh;
      left: 50%;
      bottom: 0;              /* 땅의 y 위치와 동일 */ 
      display: flex;
      justify-content: flex-end;
      transform: translateX(0%);
      background: #fff0;
      z-index: 0;
    }

    .wall {
      width: 2.0vh;
      height: 100%;
      transform-origin: bottom right;
      border-left: 1px solid #000;
      background: #fff;
      z-index: 0;
    }

    .vertical-line {
      position: absolute;
      left: -2.35vh;         /* 건물 왼쪽 벽 위치 */
      top: -3.1vh;         /* 지붕 꼭대기(높이 30px)에서 시작 */
      bottom: 0;          /* 건물 바닥(땅)까지 */
      width: 1px;         /* 두께 1px */
      background: #000;
      z-index: 10;
    }

    .building-container {
      position: absolute;
      left: 50%;
      bottom: 5vh;               /* 땅의 y 위치와 동일 */
      transform: translateX(-50%);
      z-index: 50;
    }

    .building-wrapper {
      position: relative;
      margin: 0 auto;
    }

    /* 지붕 – 기울어진 사각형으로 간단하게 표현 */
    .roof {
      position: absolute;
      bottom: 100%;
      left: 0;
      right: 0;
      height: 3.005vh;              /* 지붕 높이 – 수정 가능 */
      border: 1px solid #000;    /* 모든 선 1px */
      border-bottom: none;       /* 아래쪽은 본체와 맞닿으므로 제거 */
      background: #fff;
      transform-origin: bottom left;
      transform: skewX(36deg);  /* 기울기 조절 */
    }

    /* 건물 본체는 표(table)로 구현하여 선을 1px로 정확히 맞춤 */
    table.building {
      border-collapse: collapse;  /* 내부 격자 선을 1px로 유지 */
      border: 1px solid #000;    /* 건물 외곽선 */
      background: #fff0;
    }

    table.building td {
      border: 1px solid #000;    /* 각 방의 선도 1px */
      padding: 0;
      width: 12vh;               /* 한 칸 가로 – 수정 가능 */
      height: 6vh;              /* 한 칸 세로 – 수정 가능 */
      text-align: center;
      vertical-align: middle;
    }

    /* 각 방 버튼 – td 전체를 클릭 영역으로 사용 */
    .room-button {
      width: 100%;
      height: 100%;
      border: none;         /* 선은 td가 담당 */
      background: transparent;
      cursor: pointer;
      font-size: 1.6vh;
      
      /* 조건 3: 배경 흰색, 글자 검정 */
      background-color: #fff !important;
      color: #000 !important;
      
      /* 기본 클릭 효과 제거 */
      outline: none;
      box-shadow: none;
    }

    .room-button:active,
    .room-button:focus {
      outline: none;
      background: #fff;       /* 눌렀을 때 살짝 강조 (원치 않으면 제거) */
    }

    .room-button-empty {
      width: 100%;
      height: 100%;
      border: none;              /* 선은 td가 담당 */
      background: transparent;
      cursor: pointer;
      font-size: 1.6vh;
      
      /* 조건 3: 배경 흰색, 글자 검정 */
      background-color: none !important;
      color: #000 !important;
      
      /* 기본 클릭 효과 제거 */
      outline: none;
      box-shadow: none;
    }

    /* ------------------------------
       사람 (땅 위에서 좌우로 걷는 작은 사각형)
       ------------------------------ */
    .person {
      position: absolute;
      width: 0.4vh;                /* 조건 10: 가로 5px */
      height: 1.5vh;              /* 조건 10: 세로 10px */
      background: #000;
      bottom: 5vh;               /* 땅 바로 위에 발이 닿도록 */
      z-index: 100;
    }

    /* ------------------------------
       [추가 기능] 플로팅 텍스트 스타일
       ------------------------------ */
    .floating-text {
      position: absolute;
      left: 100%; /* 화면 오른쪽 바깥에서 시작 */
      white-space: nowrap; /* 텍스트가 줄바꿈되지 않도록 설정 */
      font-size: 2.4vh; /* 텍스트 크기 (화면 높이 비례, 조정 가능) */
      /* font-weight: bold; */
      letter-spacing: -0.05em;
      color: #000; /* 글자 색상 */
      background: #fff;
      z-index: 5; /* 건물 뒤, 배경 앞 (필요시 z-index 조정: 건물 앞은 60 이상 권장) */
      pointer-events: none; /* 마우스 클릭이 통과되도록 설정 (사용자 방해 방지) */
      will-change: transform; /* 애니메이션 성능 최적화 */
    }

    /* 텍스트 이동 애니메이션 정의 */
    @keyframes moveLeft {
      from {
        transform: translateX(0);
      }
      to {
        /* 화면 전체 너비(100vw) + 자기 자신 너비(100%)만큼 왼쪽으로 이동하여 완전히 사라짐 */
        transform: translateX(calc(-100vw - 100%));
      }
    }
  </style>
</head>
<body>
  <div id="scene">

    <!-- 땅 (가로선) -->
    <div class="ground"></div>

    <!-- 바닥 -->
    <div class="building-container">
      <div class="building-wrapper">
    
        <!-- 벽 -->
        <div class="wall-l">
          <div class="wall"></div>
        </div>
        <div class="wall-r">
          <div class="wall"></div>
        </div>

        <table class="building" aria-label="건물 호수 선택">
          <!-- 12층 -->
          <tr>
            <td><div class="floor-l"></div></td>
            <td><div class="floor-r"></div></td>
          </tr>
          <!-- 11층 -->
          <tr>
            <td><div class="floor-l"></div></td>
            <td><div class="floor-r"></div></td>
          </tr>
          <!-- 10층 -->
          <tr>
            <td><div class="floor-l"></div></td>
            <td><div class="floor-r"></div></td>
          </tr>
          <!-- 9층 -->
          <tr>
            <td><div class="floor-l"></div></td>
            <td><div class="floor-r"></div></td>
          </tr>
          <!-- 8층 -->
          <tr>
            <td><div class="floor-l"></div></td>
            <td><div class="floor-r"></div></td>
          </tr>
          <!-- 7층 -->
          <tr>
            <td><div class="floor-l"></div></td>
            <td><div class="floor-r"></div></td>
          </tr>
          <!-- 6층 -->
          <tr>
            <td><div class="floor-l"></div></td>
            <td><div class="floor-r"></div></td>
          </tr>
          <!-- 5층 -->
          <tr>
            <td><div class="floor-l"></div></td>
            <td><div class="floor-r"></div></td>
          </tr>
          <!-- 4층 -->
          <tr>
            <td><div class="floor-l"></div></td>
            <td><div class="floor-r"></div></td>
          </tr>
          <!-- 3층 -->
          <tr>
            <td><div class="floor-l"></div></td>
            <td><div class="floor-r"></div></td>
          </tr>
          <!-- 2층 -->
          <tr>
            <td><div class="floor-l"></div></td>
            <td><div class="floor-r"></div></td>
          </tr>
          <!-- 1층 -->
          <tr>
            <td><div class="floor-l"></div></td>
            <td><div class="floor-r"></div></td>
          </tr>
        </table>    
      </div>
    </div>

    <!-- 건물(항상 가운데, 땅 위에 닿게) -->
    <div class="building-container">
      <div class="building-wrapper">
        <!-- 조건 1: 지붕 위 꼭대기부터 땅까지 이어지는 수직선 -->
        <div class="vertical-line"></div>

        <!-- 방들: 9층~1층, A/B 동 -->
        <!-- td는 사각형, 그 안의 버튼이 실제 클릭 영역 -->
        <table class="building" aria-label="건물 호수 선택">
        <!-- 지붕 -->
          <tr>
            <div class="roof"></div>
          </tr>
          <!-- 12층 -->
          <tr>
            <td>
              <a href="" target="new">
                <button class="room-button-empty">임&emsp;대</button>
              </a>
            </td>
            <td>
              <a href="" target="new">
                <button class="room-button">박지원</button>
              </a>
            </td>
          </tr>
          <!-- 11층 -->
          <tr>
            <td>
              <a href="" target="new">
                <button class="room-button">홍혜림</button>
              </a>
            </td>
            <td>
              <a href="" target="new">
                <button class="room-button-empty">임&emsp;대</button>
              </a>
            </td>
          </tr>
          <!-- 10층 -->
          <tr>
            <td>
              <a href="" target="new">
                <button class="room-button-empty">임&emsp;대</button>
              </a>
            </td>
            <td>              
              <a href="https://flatland1884.vercel.app/" target="new">
                <button class="room-button">최정욱</button>
              </a>
            </td>
          </tr>
          <!-- 9층 -->
          <tr>
            <td>
              <a href="" target="new">
                <button class="room-button-empty">임&emsp;대</button>
              </a>
            </td>
            <td>
              <a href="" target="new">
                <button class="room-button">최예주</button>
              </a>
            </td>
          </tr>
          <!-- 8층 -->
          <tr>
            <td>
              <a href="" target="new">
                <button class="room-button">차리수</button>
              </a>
            </td>
            <td>
              <a href="" target="new">
                <button class="room-button-empty">임&emsp;대</button>
              </a>
            </td>
          </tr>
          <!-- 7층 -->
          <tr>
            <td>
              <a href="" target="new">
                <button class="room-button">조기봉</button>
              </a>
            </td>
            <td>
              <a href="" target="new">
                <button class="room-button">이정아</button>
              </a>
            </td>
          </tr>
          <!-- 6층 -->
          <tr>
            <td>
              <a href="" target="new">
                <button class="room-button-empty">임&emsp;대</button>
              </a>
            </td>
            <td>
              <a href="" target="new">
                <button class="room-button">이종은</button>
              </a>
            </td>
          </tr>
          <!-- 5층 -->
          <tr>
            <td>
              <a href="" target="new">
                <button class="room-button">유도원</button>
              </a>
            </td>
            <td>
              <a href="" target="new">
                <button class="room-button-empty">임&emsp;대</button>
              </a>
            </td>
          </tr>
          <!-- 4층 -->
          <tr>
            <td>
              <a href="" target="new">
                <button class="room-button-empty">임&emsp;대</button>
              </a>
            </td>
            <td>
              <a href="" target="new">
                <button class="room-button">용자상</button>
              </a>
            </td>
          </tr>
          <!-- 3층 -->
          <tr>
            <td>
              <a href="" target="new">
                <button class="room-button-empty">임&emsp;대</button>
              </a>
            </td>
            <td>
              <a href="" target="new">
                <button class="room-button-empty">임&emsp;대</button>
              </a>
            </td>
          </tr>
          <!-- 2층 -->
          <tr>
            <td>
              <a href="" target="new">
                <button class="room-button">용서우</button>
              </a>
            </td>
            <td>
              <a href="" target="new">
                <button class="room-button-empty">임&emsp;대</button>
              </a>
            </td>
          </tr>
          <!-- 1층 -->
          <tr>
            <td>
              <a href="" target="new">
                <button class="room-button">김태호</button>
              </a>
            </td>
            <td>
              <a href="" target="new">
                <button class="room-button">권진명</button>
              </a>
            </td>
          </tr>
        </table>    
      </div>
    </div>
  </div>

  <script>
    // ------------------------------------------
    // 사람(작은 사각형) 10명을 만들어 땅 위에서 걷게 하기
    // ------------------------------------------
    const PEOPLE_COUNT = 13;
    const PERSON_WIDTH = 5; // CSS .person width와 동일하게 유지
    const persons = [];
    const scene = document.getElementById("scene");

    // 사람 생성 함수
    function createPeople() {
      const viewportWidth = window.innerWidth;

      for (let i = 0; i < PEOPLE_COUNT; i++) {
        const el = document.createElement("div");
        el.className = "person";

        // 시작 x 위치: 화면 내 임의의 곳
        const startX = Math.random() * viewportWidth;

        // 방향: -1(왼쪽) 또는 1(오른쪽) 중 하나
        const dir = Math.random() < 0.5 ? -1 : 1;

        // 속도: 1초에 20~40px 정도 (걷는 느낌)
        const speed = 20 + Math.random() * 20;

        // 방향 전환 예정 시각 (ms 단위 타임스탬프)
        const now = performance.now();
        const nextTurn =
          now + 1000 + Math.random() * 4000; // 1~5초 사이에 한 번씩 방향 바꿀 기회

        scene.appendChild(el);

        const person = {
          el,
          x: startX,
          dir,
          speed,
          nextTurn,
        };

        el.style.left = person.x + "px";
        persons.push(person);
      }
    }

    // 애니메이션 루프 (requestAnimationFrame 사용)
    let lastTime = null;

    function animate(timestamp) {
      if (!lastTime) lastTime = timestamp;
      const dt = (timestamp - lastTime) / 1000; // 초 단위 delta time
      lastTime = timestamp;

      const width = window.innerWidth;

      persons.forEach((p) => {
        // 일정 시간마다 방향을 랜덤하게 바꿀 기회 부여
        if (timestamp > p.nextTurn) {
          if (Math.random() < 0.5) {
            p.dir *= -1; // 50% 확률로 방향 전환
          }
          p.nextTurn =
            timestamp + 1000 + Math.random() * 4000; // 다음 전환 시각 예약
        }

        // x 위치 갱신 (속도 * 방향 * 시간)
        p.x += p.dir * p.speed * dt;

        // 화면 밖으로 나가면 반대쪽에서 다시 등장
        if (p.x < -PERSON_WIDTH) {
          p.x = width;
        } else if (p.x > width) {
          p.x = -PERSON_WIDTH;
        }

        // 실제 DOM 요소 위치 반영
        p.el.style.left = p.x + "px";
      });

      requestAnimationFrame(animate);
    }

    // 창 크기가 바뀌더라도 최소한 화면을 벗어나지 않게 정리 (선택 사항)
    window.addEventListener("resize", () => {
      const width = window.innerWidth;
      persons.forEach((p) => {
        if (p.x > width) {
          p.x = width - PERSON_WIDTH;
        }
      });
    });

    // 초기화 및 애니메이션 시작
    createPeople();
    requestAnimationFrame(animate);

    // ------------------------------------------
    // [추가 기능] 흐르는 텍스트 생성 및 관리
    // ------------------------------------------
    
    const textConfig = {
      // 동시 등장 개수 (요청사항: 5개)
      count: 3, 
      // 텍스트 목록
      messages: [
        "매물 있습니다. 11개 사무실 선택 가능합니다. 둘러보시고 편하게 문의주세요.",
        "사무실 임대 룸 13개 계약완료. 11개 즉시 입주 가능.",
        "매물 있습니다!",
        "온라인 무빙 오피스입니다. 오프라인 무빙 오피스는 12월 19일부터 12월 21일까지 서울대학교 49동, 디자인연구동에서 진행됩니다.",
        "새로 만든 단기 사무실 임대 룸 11개! 관악 전문",
        "전용 무제한 평방 픽셀, 넓은 개방형 업무공간, 채광/환기 우수, 즉시 입주 가능!",
        "사무실 단기임대 합리적인 최적의 풀옵션 시설!",
        "무보증 사무실 단기임대 12월 19일부터 12월 21일까지!"
      ],
      // 생성 높이 (화면 상단 5% ~ 50%)
      topRange: { min: 5, max: 75 },
      // 이동 속도 (초 단위, 숫자가 클수록 느림)
      duration: { min: 45, max: 60 }
    };

    /**
     * 개별 텍스트 요소를 생성하고 애니메이션을 설정하는 함수
     * @param {boolean} isInitial - 초기 실행 여부 (true면 화면 안쪽 랜덤 위치에서 시작)
     */
    function spawnSingleText(isInitial = false) {
      const el = document.createElement("div");
      el.className = "floating-text";

      // 1. 내용 랜덤 선택
      const randomMsgIndex = Math.floor(Math.random() * textConfig.messages.length);
      el.textContent = textConfig.messages[randomMsgIndex];

      // 2. 높이 랜덤 설정 (vh)
      const randomTop = textConfig.topRange.min + Math.random() * (textConfig.topRange.max - textConfig.topRange.min);
      el.style.top = randomTop + "vh";

      // 3. 속도(지속시간) 랜덤 설정
      const randomDuration = textConfig.duration.min + Math.random() * (textConfig.duration.max - textConfig.duration.min);
      
      // 4. 애니메이션 설정
      // linear: 일정한 속도, forwards: 끝난 후 상태 유지
      el.style.animationName = "moveLeft";
      el.style.animationDuration = `${randomDuration}s`;
      el.style.animationTimingFunction = "linear";
      el.style.animationFillMode = "forwards";

      // [핵심 로직] 초기 실행 시 화면 안쪽 랜덤 위치 잡기
      if (isInitial) {
        // 전체 지속 시간 중 임의의 시간만큼 '이미 지났다'고 설정 (음수 delay)
        // 예: 20초짜리 애니메이션에 -10초 delay를 주면 화면 정중앙에서 시작함
        const randomDelay = -Math.random() * randomDuration;
        el.style.animationDelay = `${randomDelay}s`;
      } else {
        // 초기 실행이 아니면 오른쪽 끝에서 정상적으로 대기 없이 시작
        el.style.animationDelay = "0s";
      }

      // 5. 씬에 추가
      document.getElementById("scene").appendChild(el);

      // 6. 애니메이션 종료 후 처리 (순환 구조)
      // 화면 왼쪽으로 완전히 사라지면 요소를 지우고, 즉시 새로운 텍스트를 오른쪽 끝에서 생성함
      el.addEventListener("animationend", () => {
        el.remove();           // 현재 요소 제거
        spawnSingleText(false); // 새로운 요소 생성 (이제는 오른쪽 끝에서 시작)
      });
    }

    /**
     * 초기화 함수: 설정된 개수만큼 텍스트를 한 번에 생성
     */
    function initFloatingTexts() {
      for (let i = 0; i < textConfig.count; i++) {
        // 처음 5개는 true를 전달하여 화면 안쪽에 흩뿌려지게 함
        spawnSingleText(true);
      }
    }

    // 기능 시작
    initFloatingTexts();
  </script>
</body>
</html>
