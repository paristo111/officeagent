<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>빈 방 있습니다</title>
  <style>
    /* ------------------------------
       기본 레이아웃 설정
       ------------------------------ */
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden; /* 스크롤바가 생기지 않도록 */
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      background: #ffffff;
    }

    /* 전체 장면용 컨테이너 */
    #scene {
      position: relative;
      width: 100vw;
      height: 100vh;
    }

    /* ------------------------------
       상단 텍스트 띠 (마퀴 효과)
       ------------------------------ */
    .ticker {
      position: absolute;
      top: 5vh;
      left: 0;
      right: 0;
      height: 40px;             /* 띠의 높이 – 필요 시 수정 */
      overflow: hidden;
      background: #fff0;
      color: #000;
      border: none; /* 모든 선 1px */
      box-sizing: border-box;
    }

    .ticker-inner {
      display: inline-block;
      white-space: nowrap;
      /* 오른쪽에서 왼쪽으로 무한 반복 이동 */
      animation: marquee 25s linear infinite;
    }

    .ticker-text {
      padding: 0 2rem;          /* 문장 간격 */
      font-size: 16px;
      line-height: 40px;
    }

    /* 텍스트가 오른쪽(100%)에서 왼쪽(-100%)으로 이동 */
    @keyframes marquee {
      from {
        transform: translateX(100%);
      }
      to {
        transform: translateX(-100%);
      }
    }

    /* ------------------------------
       땅 (바닥에서 화면 높이의 5% 위)
       ------------------------------ */
    .ground {
      position: absolute;
      left: 0;
      right: 0;
      bottom: 5vh;               /* 조건 5: 세로폭 5% 위 */
      border-top: 1px solid #000;/* 조건 2, 4: 땅은 가로선 */
      box-sizing: border-box;
    }

    /* ------------------------------
       건물 (항상 땅 위, 가운데 배치)
       ------------------------------ */
    .building-container {
      position: absolute;
      left: 50%;
      bottom: 5vh;               /* 땅의 y 위치와 동일 */
      transform: translateX(-50%);
      z-index: 50;
    }

    .floor-container-l {
      position: absolute;
      width: 100px;
      left: 50%;
      bottom: 5vh;               /* 땅의 y 위치와 동일 */
      transform: translateX(-100%);
      display: flex;
      flex-direction: column;
      gap: 25px;
      z-index: 30;
    }

    .floor-container-r {
      position: absolute;
      width: 100px;
      left: 50%;
      bottom: 5vh;               /* 땅의 y 위치와 동일 */
      transform: translateX(0%);
      display: flex;
      flex-direction: column;
      gap: 25px;
      z-index: 10;
    }

    /* 바닥 */
    .floor {
      width: 100%;
      height: 25px;              /* 지붕 높이 – 수정 가능 */
      border: 1px solid #000;    /* 모든 선 1px */
      border-bottom: none;       /* 아래쪽은 본체와 맞닿으므로 제거 */
      background: #ff0;
      transform-origin: bottom left;
      transform: skewX(36deg);  /* 기울기 조절 */
    }

    .wall-l {
      position: absolute;
      width: 100px;
      height: 610px;
      left: 50%;
      bottom: 5vh;              /* 땅의 y 위치와 동일 */ 
      transform: translateX(-100%);
      width: 100px;
      background: #ff0;
      z-index: 20;
    }

    .wall-r {
      position: absolute;
      width: 100px;
      height: 610px;
      left: 50%;
      bottom: 5vh;               /* 땅의 y 위치와 동일 */
      transform: translateX(0%);
      width: 100px;
      background: #ff0;
      z-index: 0;
    }

    .wall {
      width: 83px;
      height: 100%;
      transform: translateX(0%);
      border-right: 1px solid #000;
      background: #fff;
      z-index: 0;
    }

    .wall-o {
      position: absolute;
      left: 50%;
      bottom: 5vh;               /* 땅의 y 위치와 동일 */
      transform: translateX(-120px);
      width: 20px;
      height: 610px;
      border-bottom: 1px solid #000;
      background: #fff;
      z-index: 40;
    }

    .building-wrapper {
      position: relative;
      margin: 0 auto;
    }

    /* 지붕 – 기울어진 사각형으로 간단하게 표현 */
    .roof {
      position: absolute;
      bottom: 100%;
      left: 0;
      right: 0;
      height: 25px;              /* 지붕 높이 – 수정 가능 */
      border: 1px solid #000;    /* 모든 선 1px */
      border-bottom: none;       /* 아래쪽은 본체와 맞닿으므로 제거 */
      background: #ffffff;
      transform-origin: bottom left;
      transform: skewX(36deg);  /* 기울기 조절 */
    }

    .vertical-line {
      position: absolute;
      left: -19px;         /* 건물 왼쪽 벽 위치 */
      top: -26px;         /* 지붕 꼭대기(높이 30px)에서 시작 */
      bottom: 0;          /* 건물 바닥(땅)까지 */
      width: 1px;         /* 두께 1px */
      background: #000;
      z-index: 10;
    }

    /* 건물 본체는 표(table)로 구현하여 선을 1px로 정확히 맞춤 */
    table.building {
      border-collapse: collapse;  /* 내부 격자 선을 1px로 유지 */
      border: 1px solid #000;    /* 건물 외곽선 */
      background: #fff0;
    }

    table.building td {
      border: 1px solid #000;    /* 각 방의 선도 1px */
      padding: 0;
      width: 100px;               /* 한 칸 가로 – 수정 가능 */
      height: 50px;              /* 한 칸 세로 – 수정 가능 */
      text-align: center;
      vertical-align: middle;
    }

    /* 각 방 버튼 – td 전체를 클릭 영역으로 사용 */
    .room-button {
      width: 100%;
      height: 100%;
      border: none;              /* 선은 td가 담당 */
      background: transparent;
      cursor: pointer;
      font-size: 14px;
      
      /* 조건 3: 배경 흰색, 글자 검정 */
      background-color: #ffffff !important;
      color: #000000 !important;
      
      /* 기본 클릭 효과 제거 */
      outline: none;
      box-shadow: none;
    }

    .room-button:active,
    .room-button:focus {
      outline: none;
      background: #f0f0f0;       /* 눌렀을 때 살짝 강조 (원치 않으면 제거) */
    }

    .room-button-empty {
      width: 100%;
      height: 100%;
      border: none;              /* 선은 td가 담당 */
      background: transparent;
      cursor: pointer;
      font-size: 14px;
      
      /* 조건 3: 배경 흰색, 글자 검정 */
      background-color: none !important;
      color: #000000 !important;
      
      /* 기본 클릭 효과 제거 */
      outline: none;
      box-shadow: none;
    }

    /* ------------------------------
       사람 (땅 위에서 좌우로 걷는 작은 사각형)
       ------------------------------ */
    .person {
      position: absolute;
      width: 5px;                /* 조건 10: 가로 5px */
      height: 10px;              /* 조건 10: 세로 10px */
      background: #000000;
      bottom: 5vh;               /* 땅 바로 위에 발이 닿도록 */
    }
  </style>
</head>
<body>
  <div id="scene">
    <!-- 상단 무한 텍스트 띠 -->
    <div class="ticker" aria-hidden="true">
      <div class="ticker-inner">
        <!-- 텍스트를 여러 번 반복해서 끊김이 보이지 않도록 처리 -->
        <span class="ticker-text">빈 방 있습니다. 1000/50으로 쿨거래하실 분 구해요. 3개 층 선택 가능합니다. 둘러보시고 편하게 문의주세요. 환영합니다.</span>
      </div>
    </div>

    <!-- 땅 (가로선) -->
    <div class="ground"></div>
    
    <!-- 바닥 -->
    <div class="floor-container-l">
        <div class="floor"></div>
        <div class="floor"></div>
        <div class="floor"></div>
        <div class="floor"></div>
        <div class="floor"></div>
        <div class="floor"></div>
        <div class="floor"></div>
        <div class="floor"></div>
        <div class="floor"></div>
        <div class="floor"></div>
        <div class="floor"></div>
        <div class="floor"></div>
    </div>
    <div class="floor-container-r">
        <div class="floor"></div>
        <div class="floor"></div>
        <div class="floor"></div>
        <div class="floor"></div>
        <div class="floor"></div>
        <div class="floor"></div>
        <div class="floor"></div>
        <div class="floor"></div>
        <div class="floor"></div>
        <div class="floor"></div>
        <div class="floor"></div>
        <div class="floor"></div>
    </div>
    <div class="wall-l">
      <div class="wall"></div>
    </div>
    <div class="wall-r">
      <div class="wall"></div>
    </div>
    <div class="wall-o"></div>

    <!-- 건물(항상 가운데, 땅 위에 닿게) -->
    <div class="building-container">
      <div class="building-wrapper">
        <!-- 지붕 -->
        <div class="roof"></div>

        <!-- 조건 1: 지붕 위 꼭대기부터 땅까지 이어지는 수직선 -->
        <div class="vertical-line"></div>

        <!-- 방들: 9층~1층, A/B 동 -->
        <!-- td는 사각형, 그 안의 버튼이 실제 클릭 영역 -->
        <table class="building" aria-label="건물 호수 선택">
          <!-- 12층 -->
          <tr>
            <td><button class="room-button-empty">임대문의</button></td>
            <td><button class="room-button-empty">임대문의</button></td>
          </tr>
          <!-- 11층 -->
          <tr>
            <td><button class="room-button">홍혜림</button></td>
            <td><button class="room-button-empty">임대문의</button></td>
          </tr>
          <!-- 10층 -->
          <tr>
            <td><button class="room-button-empty">임대문의</button></td>
            <td><button class="room-button-empty">임대문의</button></td>
          </tr>
          <!-- 9층 -->
          <tr>
            <td><button class="room-button-empty">임대문의</button></td>
            <td><button class="room-button">박지원</button></td>
          </tr>
          <!-- 8층 -->
          <tr>
            <td>
              <a href="https://flatland1884.vercel.app/" target="new">
                <button class="room-button">최정욱</button>
              </a>
            </td>
            <td><button class="room-button-empty">임대문의</button></td>
          </tr>
          <!-- 7층 -->
          <tr>
            <td><button class="room-button">차예주</button></td>
            <td><button class="room-button">차리수</button></td>
          </tr>
          <!-- 6층 -->
          <tr>
            <td><button class="room-button-empty">임대문의</button></td>
            <td><button class="room-button">조기봉</button></td>
          </tr>
          <!-- 5층 -->
          <tr>
            <td><button class="room-button">유도원</button></td>
            <td><button class="room-button">이정아</button></td>
          </tr>
          <!-- 4층 -->
          <tr>
            <td><button class="room-button-empty">임대문의</button></td>
            <td><button class="room-button">용자상</button></td>
          </tr>
          <!-- 3층 -->
          <tr>
            <td><button class="room-button-empty">임대문의</button></td>
            <td><button class="room-button-empty">임대문의</button></td>
          </tr>
          <!-- 2층 -->
          <tr>
            <td><button class="room-button">용서우</button></td>
            <td><button class="room-button-empty">임대문의</button></td>
          </tr>
          <!-- 1층 -->
          <tr>
            <td><button class="room-button">권진명</button></td>
            <td><button class="room-button">김태호</button></td>
          </tr>
        </table>
      </div>
    </div>
  </div>

  <script>
    // ------------------------------------------
    // 사람(작은 사각형) 10명을 만들어 땅 위에서 걷게 하기
    // ------------------------------------------
    const PEOPLE_COUNT = 10;
    const PERSON_WIDTH = 5; // CSS .person width와 동일하게 유지
    const persons = [];
    const scene = document.getElementById("scene");

    // 사람 생성 함수
    function createPeople() {
      const viewportWidth = window.innerWidth;

      for (let i = 0; i < PEOPLE_COUNT; i++) {
        const el = document.createElement("div");
        el.className = "person";

        // 시작 x 위치: 화면 내 임의의 곳
        const startX = Math.random() * viewportWidth;

        // 방향: -1(왼쪽) 또는 1(오른쪽) 중 하나
        const dir = Math.random() < 0.5 ? -1 : 1;

        // 속도: 1초에 20~40px 정도 (걷는 느낌)
        const speed = 20 + Math.random() * 20;

        // 방향 전환 예정 시각 (ms 단위 타임스탬프)
        const now = performance.now();
        const nextTurn =
          now + 1000 + Math.random() * 4000; // 1~5초 사이에 한 번씩 방향 바꿀 기회

        scene.appendChild(el);

        const person = {
          el,
          x: startX,
          dir,
          speed,
          nextTurn,
        };

        el.style.left = person.x + "px";
        persons.push(person);
      }
    }

    // 애니메이션 루프 (requestAnimationFrame 사용)
    let lastTime = null;

    function animate(timestamp) {
      if (!lastTime) lastTime = timestamp;
      const dt = (timestamp - lastTime) / 1000; // 초 단위 delta time
      lastTime = timestamp;

      const width = window.innerWidth;

      persons.forEach((p) => {
        // 일정 시간마다 방향을 랜덤하게 바꿀 기회 부여
        if (timestamp > p.nextTurn) {
          if (Math.random() < 0.5) {
            p.dir *= -1; // 50% 확률로 방향 전환
          }
          p.nextTurn =
            timestamp + 1000 + Math.random() * 4000; // 다음 전환 시각 예약
        }

        // x 위치 갱신 (속도 * 방향 * 시간)
        p.x += p.dir * p.speed * dt;

        // 화면 밖으로 나가면 반대쪽에서 다시 등장
        if (p.x < -PERSON_WIDTH) {
          p.x = width;
        } else if (p.x > width) {
          p.x = -PERSON_WIDTH;
        }

        // 실제 DOM 요소 위치 반영
        p.el.style.left = p.x + "px";
      });

      requestAnimationFrame(animate);
    }

    // 창 크기가 바뀌더라도 최소한 화면을 벗어나지 않게 정리 (선택 사항)
    window.addEventListener("resize", () => {
      const width = window.innerWidth;
      persons.forEach((p) => {
        if (p.x > width) {
          p.x = width - PERSON_WIDTH;
        }
      });
    });

    // 초기화 및 애니메이션 시작
    createPeople();
    requestAnimationFrame(animate);
  </script>
</body>
</html>
